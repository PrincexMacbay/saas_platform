# üîß Supabase Environment Variables Checklist

## ‚úÖ **Required Environment Variables for Backend**

### **Database Connection (Auto-generated by Vercel)**
- [ ] `SUPABASE_POSTGRES_URL` - Main PostgreSQL connection URL
- [ ] `SUPABASE_POSTGRES_URL_NON_POOLING` - Non-pooling connection URL
- [ ] `SUPABASE_POSTGRES_USER` - Database username
- [ ] `SUPABASE_POSTGRES_PASSWORD` - Database password
- [ ] `SUPABASE_POSTGRES_DATABASE` - Database name
- [ ] `SUPABASE_POSTGRES_HOST` - Database host

### **Supabase API Configuration**
- [ ] `SUPABASE_SUPABASE_URL` - Supabase project URL
- [ ] `SUPABASE_NEXT_PUBLIC_SUPABASE_URL` - Public Supabase URL
- [ ] `SUPABASE_NEXT_PUBLIC_SUPABASE_ANON_KEY` - Public anonymous key
- [ ] `SUPABASE_SUPABASE_SERVICE_ROLE_KEY` - Service role key
- [ ] `SUPABASE_SUPABASE_JWT_SECRET` - JWT secret

### **Application Configuration**
- [ ] `NODE_ENV=production`
- [ ] `VERCEL=1`
- [ ] `JWT_SECRET` - Your application JWT secret
- [ ] `CLIENT_URL=https://client-seven-sage.vercel.app`
- [ ] `FRONTEND_URL=https://client-seven-sage.vercel.app`

## üéØ **How to Set These in Vercel**

### **Step 1: Go to Vercel Dashboard**
1. Navigate to your backend project
2. Go to **Settings** ‚Üí **Environment Variables**

### **Step 2: Add Each Variable**
For each variable above:
1. Click **Add New**
2. Enter the **Name** (e.g., `SUPABASE_POSTGRES_URL`)
3. Enter the **Value** (from your Supabase connection)
4. Select **Production**, **Preview**, and **Development**
5. Click **Save**

### **Step 3: Redeploy**
After adding all variables:
1. Go to **Deployments**
2. Click **Redeploy** on your latest deployment

## üß™ **Testing Your Configuration**

### **Test Backend Health**
```bash
curl https://server-lemon-alpha.vercel.app/health
```

Expected response:
```json
{
  "status": "OK",
  "timestamp": "2025-01-23T10:56:49.000Z",
  "environment": "production",
  "vercel": true,
  "database_url_set": true,
  "supabase_postgres_url_set": true,
  "client_url": "https://client-seven-sage.vercel.app"
}
```

### **Test Database Connection**
```bash
curl https://server-lemon-alpha.vercel.app/api/test
```

## üîç **Troubleshooting**

### **If Backend Still Returns 500 Error:**
1. Check Vercel function logs
2. Verify all environment variables are set
3. Ensure `SUPABASE_POSTGRES_URL` is correctly formatted
4. Check that database credentials are valid

### **If Database Connection Fails:**
1. Verify `SUPABASE_POSTGRES_URL` is set
2. Check Supabase project is active
3. Ensure database is not paused
4. Verify connection limits aren't exceeded

## üìã **Your Current Supabase Variables**

Based on your connection, you should have these variables set:

```bash
SUPABASE_POSTGRES_URL="************"
SUPABASE_POSTGRES_PRISMA_URL="*******************"
SUPABASE_SUPABASE_URL="************"
SUPABASE_NEXT_PUBLIC_SUPABASE_URL="************************"
SUPABASE_POSTGRES_URL_NON_POOLING="************************"
SUPABASE_SUPABASE_JWT_SECRET="*******************"
SUPABASE_POSTGRES_USER="*************"
SUPABASE_NEXT_PUBLIC_SUPABASE_ANON_KEY="*****************************"
SUPABASE_POSTGRES_PASSWORD="*****************"
SUPABASE_POSTGRES_DATABASE="*****************"
SUPABASE_SUPABASE_SERVICE_ROLE_KEY="*************************"
SUPABASE_POSTGRES_HOST="*************"
```

## ‚úÖ **Next Steps**

1. **Set all environment variables** in Vercel Dashboard
2. **Redeploy your backend**
3. **Test the health endpoint**
4. **Test your frontend** - the Network Error should be resolved!

Your backend should now connect successfully to Supabase! üéâ

